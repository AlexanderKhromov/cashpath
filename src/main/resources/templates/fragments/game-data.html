<!-- -*- coding: utf-8 -*- -->
<div id="gameContainer"
     th:fragment="game-data (game, opportunityCard, passiveIncomes)"
     th:attr="data-current-card-id=${opportunityCard != null ? opportunityCard.id : -1}"
     xmlns:th="http://www.thymeleaf.org"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.thymeleaf.org">

    <h3>–î–µ–Ω—å <span th:text="${game.currentDay}"></span>
        <span th:if="${#lists.isEmpty(game.players)}">–ù–µ—Ç –∏–≥—Ä–æ–∫–æ–≤</span>
        <span th:unless="${#lists.isEmpty(game.players)}">
            –•–æ–¥ –∏–≥—Ä–æ–∫–∞: <span th:text="${game.players[game.currentTurn].name}"></span>
        </span>
    </h3>

    <div class="clearfix">
        <div th:each="player, iterStat : ${game.players}"
             th:class="'player-card ' + (${iterStat.index} == ${game.currentTurn} ? 'active' : '')">

            <h2 th:text="${player.name}"
                th:classappend="${iterStat.index} == ${game.currentTurn} ? ' active-player-name' : ''">
            </h2>
            <p>üí∞ –ù–∞–ª–∏—á–Ω—ã–µ: <b th:text="${#numbers.formatDecimal(player.cash, 1, 2)}"></b> ‚Ç¥</p>
            <p>üíº –ó–∞—Ä–ø–ª–∞—Ç–∞: <b th:text="${#numbers.formatDecimal(player.salary, 1, 2)}"></b> ‚Ç¥</p>
            <p>üìâ –ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã: <b th:text="${#numbers.formatDecimal(player.monthlyExpenses, 1, 2)}"></b> ‚Ç¥</p>
            <p>üìà –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥: <b th:text="${#numbers.formatDecimal(passiveIncomes[iterStat.index], 1, 2)}"></b> ‚Ç¥</p>

            <h4>–ü–∞—Å—Å–∏–≤—ã:</h4>
            <table>
                <thead>
                <tr>
                    <th>–ü–ª–∞—Ç—ë–∂</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="p : ${player.liabilities}">
                    <td th:text="${p.name}"></td>
                    <td th:text="${#numbers.formatDecimal(p.monthlyPayment, 1, 2)}"></td>
                </tr>
                </tbody>
            </table>
            <!-- Current purchase for player -->
            <div th:if="${opportunityCard != null and iterStat.index == game.currentTurn}" style="margin-top:20px;padding:15px;border:2px solid #4CAF50;border-radius:10px;background:#f9fff9;">
                <h3>üéØ –¢–µ–∫—É—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏:</h3>
                <p><b>–ù–∞–∑–≤–∞–Ω–∏–µ:</b> <span th:text="${opportunityCard.description}">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã</span></p>
                <p><b>–°—Ç–æ–∏–º–æ—Å—Ç—å:</b> <span th:text="${#numbers.formatDecimal(opportunityCard.price, 1, 2)}">0</span> ‚Ç¥</p>
            </div>
        </div>
    </div>
</div>

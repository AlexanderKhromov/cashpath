<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>CashPath ‚Äî –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f8f9fa; }
        h1 { color: #333; }
        .player-card {
            border: 1px solid #ccc; border-radius: 10px;
            padding: 15px; margin: 10px; background: #fff;
            width: 45%; float: left;
        }
        .active { border-color: #007bff; box-shadow: 0 0 10px rgba(0,123,255,0.3); }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ccc; padding: 5px; text-align: left; }
        button { background-color: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        .clearfix::after { content: ""; clear: both; display: table; }
    </style>
</head>
<body>

<h1>CashPath ‚Äî –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ</h1>
<h3>–î–µ–Ω—å <span th:text="${game.currentDay}"></span> |
    –•–æ–¥ –∏–≥—Ä–æ–∫–∞:
    <span th:text="${game.players[game.currentTurn].name}"></span>>
</h3>

<div class="clearfix">
    <div th:each="player, iterStat : ${game.players}"
         th:class="'player-card ' + (${iterStat.index} == ${game.currentTurn} ? 'active' : '')">

        <h2 th:text="${player.name}"></h2>
        <p>üí∞ –ù–∞–ª–∏—á–Ω—ã–µ: <b th:text="${#numbers.formatDecimal(player.cash, 1, 2)}"></b> ‚Ç¥</p>
        <p>üíº –ó–∞—Ä–ø–ª–∞—Ç–∞: <b th:text="${#numbers.formatDecimal(player.salary, 1, 2)}"></b> ‚Ç¥</p>
        <p>üìâ –ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã: <b th:text="${#numbers.formatDecimal(player.monthlyExpenses, 1, 2)}"></b> ‚Ç¥</p>
        <p>üìà –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥: <b th:text="${#numbers.formatDecimal(passiveIncomes[iterStat.index], 1, 2)}"></b> ‚Ç¥</p>
        <h4>–ü–∞—Å—Å–∏–≤—ã:</h4>
        <table>
            <thead>
            <tr>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–ü–ª–∞—Ç—ë–∂</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="p : ${player.liabilities}">
                <td th:text="${p.name}"></td>
                <td th:text="${p.monthlyPayment}"></td>
            </tr>
            </tbody>
        </table>

        <!-- –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞ -->
        <form th:if="${iterStat.index} == ${game.currentTurn}"
              th:action="@{'/game/' + ${game.id} + '/next-turn'}"
              method="post">
            <button type="submit">–ó–∞–∫–æ–Ω—á–∏—Ç—å —Ö–æ–¥</button>
        </form>
    </div>
</div>

<!-- –õ–æ–≥ -->
<div th:if="${log}" class="log-box">
    <h3>üßæ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ö–æ–¥–∞:</h3>
    <div th:text="${log}"></div>
</div>

</body>
</html>
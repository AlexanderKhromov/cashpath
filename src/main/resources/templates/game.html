<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>CashPath - Игра</title>
    <meta charset="UTF-8">
    <script>
        function move(gameId) {
            fetch(`/api/games/${gameId}/move`, { method: 'POST' })
                .then(response => response.text())
                .then(data => {
                    document.getElementById("log").innerText = data;
                    location.reload();
                });
        }

        function addPlayer(gameId) {
            const name = prompt("Введите имя игрока:");
            if(name) {
                fetch(`/api/games/${gameId}/players`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name })
                }).then(() => location.reload());
            }
        }
    </script>
</head>
<body>
<h1>CashPath - Игра</h1>

<h2>Игроки</h2>
<table border="1">
    <tr>
        <th>Имя</th>
        <th>Cash</th>
        <th>Salary</th>
        <th>Expenses</th>
    </tr>
    <tr th:each="player : ${game.players}">
        <td th:text="${player.name}"></td>
        <td th:text="${player.cash}"></td>
        <td th:text="${player.salary}"></td>
        <td th:text="${player.monthlyExpenses}"></td>
    </tr>
</table>

<button th:onclick="'addPlayer(' + ${game.id} + ')'" >Добавить игрока</button>
<div id="log" th:text="${log}"></div>


<h2>Лог хода</h2>
<div id="log"></div>

</body>
</html>
